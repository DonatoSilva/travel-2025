---
import Image from "astro/components/Image.astro";

interface Cards {
    class: string;
    src: string;
    alt: string;
    p: string;
}

const { src, alt, p, class: className } = Astro.props;

const id =
    Math.random().toString(36).substring(2, 15) +
    Math.random().toString(36).substring(2, 15);
---

<div class={`card ${className}`} id={id}>
    <div class="w-full h-full">
        <Image src={src} alt={alt} />
        <p>{p}</p>
    </div>
</div>

<dialog
    class={`${id} w-full h-full max-h-[650px] md:max-h-[550px] max-w-4xl px-8 py-4 bg-orange-50 rounded-md`}
>
    <div class="w-full flex flex-row items-center">
        <h4 class="text-4xl text-orange-700 font-semibold">{p}</h4>
        <button
            class="text-2xl bg-orange-700 text-white px-3 py-1 rounded flex justify-center items-center"
            style="margin-left: auto;"
        >
            X
        </button>
    </div>
</dialog>

<script>
    const cards = document.querySelectorAll(".card");

    cards.forEach((card) => {
        const id = card.id;

        let dialog = document.getElementsByClassName(
            `${id}`,
        )[0] as HTMLDialogElement;

        card?.addEventListener("click", () => {
            console.log("click");
            dialog?.showModal();
        });

        dialog?.addEventListener("click", () => {
            dialog?.close();
        });
    });
</script>
